<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Beauty - FBC Creators</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700;900&family=Noto+Serif+KR:wght@400;500;700;900&display=swap" rel="stylesheet">
    <style>
        * {
            font-family: 'Noto Sans KR', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif !important;
        }
        .font-serif, .font-serif * {
            font-family: 'Noto Serif KR', Georgia, serif !important;
        }
        body {
            font-family: 'Noto Sans KR', sans-serif;
        }
        
        .header-container {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            align-items: center;
        }
        .header-left {
            justify-self: start;
        }
        .header-center {
            justify-self: center;
        }
        .header-right {
            justify-self: end;
        }
        
        .hero-article {
            position: relative;
            overflow: hidden;
        }
        .hero-article img {
            transition: transform 0.5s ease;
        }
        .hero-article:hover img {
            transform: scale(1.05);
        }
        
        .category-badge {
            display: inline-block;
            padding: 4px 12px;
            font-size: 11px;
            font-weight: 600;
            letter-spacing: 0.5px;
            text-transform: uppercase;
            background: black;
            color: white;
        }
        
        .cultural-badge {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 3px 10px;
            font-size: 10px;
            border-radius: 12px;
            font-weight: 600;
            letter-spacing: 0.03em;
        }
        
        .fade-in {
            animation: fadeIn 0.6s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .filter-badge {
            display: inline-block;
            padding: 6px 16px;
            font-size: 12px;
            font-weight: 600;
            border: 1px solid #e5e7eb;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.2s;
            background: white;
        }
        .filter-badge:hover {
            border-color: #000;
            background: #f9fafb;
        }
        .filter-badge.active {
            background: black;
            color: white;
            border-color: black;
        }

        html {
            scroll-behavior: smooth;
        }
    </style>
</head>
<body class="bg-white text-gray-900">

<!-- Header -->
<header class="bg-white border-b sticky top-0 z-50">
    <div class="max-w-7xl mx-auto px-4">
        <div class="header-container py-3 border-b">
            <div class="header-left flex items-center space-x-4 text-xs">
                <button id="lang-toggle" class="px-3 py-1 border border-gray-300 hover:bg-gray-100 transition">
                    <span id="lang-text">English</span>
                </button>
            </div>
            <div class="header-center">
                <a href="../index.html" class="hover:opacity-80 transition">
                    <h1 class="text-3xl font-serif font-bold tracking-wider">FBC</h1>
                </a>
            </div>
            <div class="header-right flex items-center space-x-4 text-xs">
                <a href="#newsletter-section" class="hover:text-gray-600">SUBSCRIBE</a>
            </div>
        </div>
        <nav class="py-4">
            <ul class="flex items-center justify-center space-x-6 md:space-x-8 text-sm font-medium">
                <li><a href="../fashion/index.html" class="hover:text-gray-600 transition">FASHION</a></li>
                <li><a href="../beauty/index.html" class="hover:text-gray-600 transition border-b-2 border-black pb-1">BEAUTY</a></li>
                <li><a href="../life/index.html" class="hover:text-gray-600 transition">LIFE</a></li>
                <li><a href="../districts/index.html" class="hover:text-gray-600 transition relative">DISTRICTS</a></li>
            </ul>
        </nav>
    </div>
</header>

<!-- Main Content -->
<main class="max-w-7xl mx-auto px-4 py-12">
    
    <!-- Page Title -->
    <div class="mb-8">
        <h2 class="text-4xl font-serif font-bold mb-2">Beauty</h2>
        <p class="text-gray-600">Discover the world of K-beauty trends and tips</p>
    </div>

    <!-- Filter Tabs -->
    <div class="mb-12">
        <div class="flex flex-wrap gap-3 mb-6">
            <button class="filter-badge active" data-filter="all" data-type="category">All</button>
            <button class="filter-badge" data-filter="Beauty Trend" data-type="category">Beauty Trend</button>
            <button class="filter-badge" data-filter="Beauty Item" data-type="category">Beauty Item</button>
            <button class="filter-badge" data-filter="Beauty Guide" data-type="category">Beauty Guide</button>
            <button class="filter-badge" data-filter="Beauty Spot" data-type="category">Beauty Spot</button>
            <button class="filter-badge" data-filter="Beauty News" data-type="category">Beauty News</button>
        </div>
        <div class="border-t pt-4">
            <p class="text-sm text-gray-500 mb-2">Filter by Cultural Badge:</p>
            <div class="flex flex-wrap gap-3">
                <button class="filter-badge" data-filter="all" data-type="cultural">All</button>
                <button class="filter-badge" data-filter="Cultural Translation" data-type="cultural">Cultural Translation</button>
            </div>
        </div>
    </div>

    <!-- Hero Featured Article -->
    <section class="mb-16">
        <div id="hero-article" class="hero-article">
            <!-- Dynamic hero content -->
        </div>
    </section>

    <!-- Featured Articles Grid (Top 4) -->
    <section class="mb-16">
        <div id="featured-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
            <!-- Dynamic featured articles -->
        </div>
    </section>

    <!-- Latest Stories -->
    <section class="mb-16" id="latest-section" style="display: none;">
        <h3 class="text-2xl font-serif font-bold mb-6">Latest Stories</h3>
        <div id="latest-articles" class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-6">
            <!-- Dynamic latest articles -->
        </div>
    </section>

    <!-- Load More Button -->
    <div class="text-center mb-12" id="load-more-container" style="display: none;">
        <button id="load-more" class="px-8 py-3 bg-black text-white font-medium hover:bg-gray-800 transition">
            <span id="load-more-text">Load More</span>
        </button>
    </div>

</main>

<!-- Footer -->
<footer class="bg-black text-white py-12">
    <div class="max-w-7xl mx-auto px-4">
        <div class="grid grid-cols-1 md:grid-cols-4 gap-8 mb-8">
            <div>
                <h3 class="font-serif text-2xl font-bold mb-4">FBC</h3>
                <p class="text-sm text-gray-400">Fashion, Beauty, Culture<br>with Cultural Translation</p>
            </div>
            <div>
                <h4 class="font-bold mb-3 text-sm">CATEGORIES</h4>
                <ul class="space-y-2 text-sm text-gray-400">
                    <li><a href="../fashion/index.html" class="hover:text-white">Fashion</a></li>
                    <li><a href="../beauty/index.html" class="hover:text-white">Beauty</a></li>
                    <li><a href="../life/index.html" class="hover:text-white">Life & Culture</a></li>
                    <li><a href="../districts/index.html" class="hover:text-white">Districts</a></li>
                </ul>
            </div>
            <div>
                <h4 class="font-bold mb-3 text-sm">ABOUT</h4>
                <ul class="space-y-2 text-sm text-gray-400">
                    <li><a href="#" class="hover:text-white">About FBC</a></li>
                    <li><a href="#" class="hover:text-white">Cultural Translation</a></li>
                    <li><a href="#" class="hover:text-white">Contact</a></li>
                </ul>
            </div>
            <div id="newsletter-section">
                <h4 class="font-bold mb-3 text-sm">NEWSLETTER</h4>
                <p class="text-sm text-gray-400 mb-3">Get weekly K-beauty insights</p>
                <div class="flex">
                    <input type="email" id="newsletter-email" placeholder="Your email" class="px-3 py-2 bg-gray-800 text-sm flex-1 focus:outline-none">
                    <button id="newsletter-submit" class="px-4 py-2 bg-white text-black text-sm font-medium">→</button>
                </div>
            </div>
        </div>
        <div class="border-t border-gray-800 pt-6 text-center text-xs text-gray-500">
            © 2025 FBC Creators. All rights reserved.
        </div>
    </div>
</footer>

<script>
// Language State with localStorage
let currentLang = 'en';

// Initialize Language
function initializeLanguage() {
    const savedLang = localStorage.getItem('fbc_language');
    if (savedLang) {
        currentLang = savedLang;
    } else {
        const browserLang = navigator.language || navigator.userLanguage;
        currentLang = browserLang.toLowerCase().includes('ko') ? 'ko' : 'en';
        localStorage.setItem('fbc_language', currentLang);
    }
    document.getElementById('lang-text').textContent = currentLang === 'en' ? 'English' : '한국어';
}

// Beauty Data
let beautyData = [];
let filteredData = [];
let currentFilter = { type: 'category', value: 'all' };
let displayedArticles = 13;
const articlesPerLoad = 12;

// ID Prefix Mapping
const prefixMap = {
    'fs': 'fashion',
    'by': 'beauty',
    'lf': 'life',
    'ds': 'districts'
};

// Get Category from ID
function getCategoryFromId(id) {
    const prefix = id.substring(0, 2);
    return prefixMap[prefix] || 'beauty';
}

// Build Article URL
function buildArticleUrl(id) {
    const category = getCategoryFromId(id);
    return `../article/index.html?category=${category}&id=${id}`;
}

// Initialize
document.addEventListener('DOMContentLoaded', async () => {
    initializeLanguage();
    await loadBeautyData();
    setupLanguageToggle();
    setupFilterButtons();
    setupLoadMore();
    applyFilter();
});

// Load Beauty Data
async function loadBeautyData() {
    try {
        const response = await fetch('../data/beauty.json');
        beautyData = await response.json();
        filteredData = [...beautyData];
    } catch (error) {
        console.error('Error loading beauty data:', error);
        beautyData = [];
        filteredData = [];
    }
}

// Setup Language Toggle
function setupLanguageToggle() {
    const langToggle = document.getElementById('lang-toggle');
    const langText = document.getElementById('lang-text');
    
    langToggle.addEventListener('click', () => {
        currentLang = currentLang === 'en' ? 'ko' : 'en';
        langText.textContent = currentLang === 'en' ? 'English' : '한국어';
        localStorage.setItem('fbc_language', currentLang);
        updateTexts();
        renderPage();
    });
}

// Setup Filter Buttons
function setupFilterButtons() {
    const filterButtons = document.querySelectorAll('.filter-badge');
    filterButtons.forEach(button => {
        button.addEventListener('click', () => {
            const filterType = button.dataset.type;
            const filterValue = button.dataset.filter;
            
            // Update active state within the same type
            document.querySelectorAll(`[data-type="${filterType}"]`).forEach(btn => {
                btn.classList.remove('active');
            });
            button.classList.add('active');
            
            currentFilter = { type: filterType, value: filterValue };
            displayedArticles = 12;
            applyFilter();
        });
    });
}

// Apply Filter
function applyFilter() {
    if (currentFilter.type === 'category') {
        if (currentFilter.value === 'all') {
            filteredData = [...beautyData];
        } else {
            filteredData = beautyData.filter(article => article.category === currentFilter.value);
        }
    } else if (currentFilter.type === 'cultural') {
        if (currentFilter.value === 'all') {
            filteredData = [...beautyData];
        } else {
            filteredData = beautyData.filter(article => article.cultural_badge === currentFilter.value);
        }
    }
    
    // Sort by date (newest first)
    filteredData.sort((a, b) => new Date(b.date) - new Date(a.date));
    
    renderPage();
}

// Setup Load More
function setupLoadMore() {
    document.getElementById('load-more').addEventListener('click', () => {
        displayedArticles += articlesPerLoad;
        renderLatestStories();
    });
}

// Render Entire Page
function renderPage() {
    updateTexts();
    renderHeroArticle();
    renderFeaturedGrid();
    renderLatestStories();
}

// Update Text Content Based on Language
function updateTexts() {
    document.getElementById('load-more-text').textContent = currentLang === 'en' ? 'Load More' : '더 보기';
}

// Render Hero Article
function renderHeroArticle() {
    if (filteredData.length === 0) {
        document.getElementById('hero-article').innerHTML = '';
        return;
    }
    
    const hero = filteredData[0];
    const title = currentLang === 'en' ? hero.title_en : hero.title_kor;
    const desc = currentLang === 'en' ? hero.desc_en : hero.desc_kor;
    
    document.getElementById('hero-article').innerHTML = `
        <a href="${buildArticleUrl(hero.id)}" class="block relative group">
            <div class="aspect-[16/9] overflow-hidden bg-gray-100">
                <img src="../${hero.image}" alt="${title}" 
                     class="w-full h-full object-cover"
                     onerror="this.src='https://placehold.co/1200x675/e5e5e5/666666?text=FBC'">
            </div>
            <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-8">
                <div class="flex items-center space-x-2 mb-3">
                    <span class="category-badge">${hero.category}</span>
                    ${hero.cultural_badge ? `<span class="cultural-badge">${hero.cultural_badge}</span>` : ''}
                </div>
                <h2 class="text-3xl md:text-4xl font-serif font-bold text-white mb-2">${title}</h2>
                <p class="text-white/90 text-lg mb-3">${desc}</p>
                <p class="text-white/70 text-sm">${hero.date} · ${hero.author}</p>
            </div>
        </a>
    `;
}

// Render Featured Grid (Next 4 articles)
function renderFeaturedGrid() {
    const articles = filteredData.slice(1, 5);
    const html = articles.map(article => createArticleCard(article, 'small')).join('');
    document.getElementById('featured-grid').innerHTML = html;
}

// Render Latest Stories
function renderLatestStories() {
    const articles = filteredData.slice(5, displayedArticles);
    const latestSection = document.getElementById('latest-section');
    const loadMoreContainer = document.getElementById('load-more-container');
    
    if (articles.length === 0) {
        latestSection.style.display = 'none';
        loadMoreContainer.style.display = 'none';
        return;
    }
    
    latestSection.style.display = 'block';
    const html = articles.map(article => createArticleCard(article, 'small')).join('');
    document.getElementById('latest-articles').innerHTML = html;
    
    // Show/Hide Load More Button
    if (displayedArticles >= filteredData.length) {
        loadMoreContainer.style.display = 'none';
    } else {
        loadMoreContainer.style.display = 'block';
    }
}

// Create Article Card
function createArticleCard(article, size = 'medium') {
    const title = currentLang === 'en' ? article.title_en : article.title_kor;
    const desc = currentLang === 'en' ? article.desc_en : article.desc_kor;
    
    const aspectRatio = size === 'small' ? 'aspect-[3/2]' : 'aspect-[4/3]';
    const titleSize = size === 'small' ? 'text-base' : 'text-lg';
    
    return `
        <article class="fade-in">
            <a href="${buildArticleUrl(article.id)}" class="block group">
                <div class="${aspectRatio} overflow-hidden bg-gray-100 mb-4 relative">
                    <img src="../${article.image}" alt="${title}" 
                         class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"
                         onerror="this.src='https://placehold.co/800x600/e5e5e5/666666?text=FBC'">
                    ${article.cultural_badge ? `<span class="cultural-badge absolute top-3 left-3">${article.cultural_badge}</span>` : ''}
                </div>
                <div>
                    <div class="flex items-center space-x-2 mb-2">
                        <span class="text-xs font-semibold uppercase tracking-wide">${article.category}</span>
                    </div>
                    <h3 class="${titleSize} font-bold mb-2 group-hover:text-gray-600 transition line-clamp-2">${title}</h3>
                    <p class="text-sm text-gray-600 mb-2 line-clamp-2">${desc}</p>
                    <p class="text-xs text-gray-500">${article.date} · ${article.author}</p>
                </div>
            </a>
        </article>
    `;
}

// Newsletter Subscription
document.getElementById('newsletter-submit').addEventListener('click', () => {
    const email = document.getElementById('newsletter-email').value;
    if (email && email.includes('@')) {
        alert(currentLang === 'en' 
            ? 'Thank you for subscribing!' 
            : '구독해 주셔서 감사합니다!');
        document.getElementById('newsletter-email').value = '';
    } else {
        alert(currentLang === 'en' 
            ? 'Please enter a valid email address.' 
            : '유효한 이메일 주소를 입력해주세요.');
    }
});
</script>

</body>
</html>
